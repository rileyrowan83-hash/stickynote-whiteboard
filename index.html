<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sticky Notes</title>
<style>
:root{
  --bg:#eef2f6; --board:#fffef9; --muted:#6b6e73; --ink:#0b0b0c;
  --shadow:0 18px 40px rgba(10,10,12,0.08);
  --match-glow:0 0 26px rgba(180,80,200,0.18);
}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;-webkit-font-smoothing:antialiased}
body{background:linear-gradient(180deg,#f3f6f9,#eef2f6);padding:18px;display:flex;justify-content:center;color:var(--ink)}
.container{width:100%;max-width:1300px;display:grid;grid-template-columns:1fr 380px;gap:20px;align-items:start}
.board{background:var(--board);border-radius:12px;padding:20px;min-height:80vh;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,0.04);position:relative;overflow:auto}
.board h1{margin:0;font-size:28px}
.controls{display:flex;gap:8px;margin-bottom:12px}
.btn{padding:8px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
.btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06)}
.btn.primary{background:#111827;color:#fff}
.notes-area{position:relative;width:100%;min-height:72vh;border-radius:10px;background:linear-gradient(180deg,#fbfbfb,#fffef8);border:1px dashed rgba(0,0,0,0.03);overflow:auto;padding:8px}
.note{position:absolute;width:180px;min-height:120px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fff8d6);box-shadow:0 10px 28px rgba(0,0,0,0.08);border:1px solid rgba(0,0,0,0.04);transform-origin:center;touch-action:none;transition:box-shadow .22s,transform .12s}
.note.match{box-shadow:var(--match-glow);transform:scale(1.03)}
.note .note-content{outline:none;white-space:pre-wrap;word-break:break-word;font-size:14px;line-height:1.2}
.note .note-meta{display:flex;justify-content:flex-end;margin-top:8px;font-size:12px}
.note .note-meta button{background:transparent;border:none;color:var(--muted);cursor:pointer;font-weight:600}
.note::before{content:"";position:absolute;left:12px;top:-8px;width:56px;height:12px;background:linear-gradient(90deg, rgba(255,255,255,0.6), rgba(255,255,255,0.2));border-radius:4px;transform:rotate(-4deg)}
.side{min-height:80vh}
.sticky-control{background:linear-gradient(180deg,#fff,#fff);padding:12px;border-radius:12px;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,0.06)}
textarea#inputNote{width:100%;min-height:96px;resize:vertical;padding:10px;border-radius:8px;border:1px dashed rgba(0,0,0,0.06);font-family:inherit}
.tiny-login{position:fixed;right:12px;top:8px;font-size:12px;padding:6px 8px;border-radius:6px;background:transparent;border:1px solid rgba(0,0,0,0.06);color:var(--muted);cursor:default;z-index:60;opacity:0.95}
.tiny-login.enabled{background:#111827;color:#fff;cursor:pointer}
.overlay{position:fixed;inset:0;display:none;place-items:center;background:linear-gradient(180deg, rgba(8,8,9,0.6), rgba(8,8,9,0.86));z-index:90;backdrop-filter:blur(4px);color:#dbeefc}
.panel{width:min(760px,94%);max-height:86vh;overflow:auto;background:linear-gradient(180deg,#07080a,#050405);border-radius:10px;padding:22px;font-family:monospace;font-size:15px;color:#cfe8ff;line-height:1.5}
.closeX{position:absolute;right:14px;top:10px;background:transparent;border:none;color:#dbe;font-size:18px;cursor:pointer}
footer.small{color:var(--muted);margin-top:12px;font-size:13px}
@media (max-width:920px){.container{grid-template-columns:1fr;padding-bottom:120px}}
</style>
</head>
<body>
<button id="loginBtn" class="tiny-login" title="Login (disabled)">Login</button>

<div class="container">
  <main class="board">
    <h1>Sticky Notes</h1>

    <div class="controls">
      <button id="addBtn" class="btn ghost">+ New Note</button>
      <button id="exportBtn" class="btn">Export</button>
      <button id="importBtn" class="btn ghost">Import</button>
      <button id="clearBtn" class="btn" style="background:#f3f4f6;color:#111;border:1px solid rgba(0,0,0,0.04);">Clear All</button>
    </div>

    <div id="notesArea" class="notes-area" tabindex="0"></div>
    <footer class="small"></footer>
  </main>

  <aside class="side">
    <div class="sticky-control">
      <textarea id="inputNote" placeholder="Write a note..."></textarea>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px;">
        <button id="submitBtn" class="btn primary">Add</button>
      </div>
    </div>
  </aside>
</div>

<div id="overlay" class="overlay" aria-hidden="true">
  <div class="panel" role="document">
    <button id="closeOverlay" class="closeX" title="Close">✕</button>
    <pre id="overlayText" style="white-space:pre-wrap;margin:0;"></pre>
  </div>
</div>

<script>
/* Persistent sticky notes + secret-check only on notes
   Secret phrase (exact match, punctuation and capitalization matter):
     It is coming, but I will not allow it to succeed.
   When that exact phrase is typed in a sticky note (and editing finishes),
   the matched note glows, a creepy overlay appears, and the tiny login enables.
*/

const STORAGE_KEY = 'sticky_notes_app_v1';
const SECRET_PHRASE = "It is coming, but I will not allow it to succeed."; // exact phrase

/* utilities */
function genId(){ return 'n_' + Math.random().toString(36).slice(2,10); }
function loadNotes(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }catch(e){ return []; } }
function saveNotes(notes){ localStorage.setItem(STORAGE_KEY, JSON.stringify(notes)); }
function trimOnly(s){ return (s || '').trim(); } // preserve internal spacing & punctuation

/* DOM refs */
const notesArea = document.getElementById('notesArea');
const addBtn = document.getElementById('addBtn');
const exportBtn = document.getElementById('exportBtn');
const importBtn = document.getElementById('importBtn');
const clearBtn = document.getElementById('clearBtn');
const inputNote = document.getElementById('inputNote');
const submitBtn = document.getElementById('submitBtn');
const loginBtn = document.getElementById('loginBtn');
const overlay = document.getElementById('overlay');
const overlayText = document.getElementById('overlayText');
const closeOverlay = document.getElementById('closeOverlay');

let dragging = null;
let offset = { x:0, y:0 };
let unlocked = false;

/* create a note element */
function createNoteElement(note){
  const el = document.createElement('div');
  el.className = 'note';
  el.style.left = (note.x || 20) + 'px';
  el.style.top  = (note.y || 20) + 'px';
  el.style.transform = `rotate(${note.rot || (Math.random()*6-3)}deg)`;
  el.dataset.id = note.id;

  const content = document.createElement('div');
  content.className = 'note-content';
  content.contentEditable = true;
  content.spellcheck = false;
  content.innerText = note.text || '';

  // when editing finishes: save & check secret
  content.addEventListener('blur', async () => {
    const newText = content.innerText || '';
    updateNote(note.id, newText);
    await checkNoteForSecret(note.id, newText, el);
  });

  content.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' && !e.shiftKey){
      e.preventDefault();
      content.blur();
    }
  });

  const meta = document.createElement('div');
  meta.className = 'note-meta';
  const delBtn = document.createElement('button');
  delBtn.innerText = 'Delete';
  delBtn.addEventListener('click', () => deleteNote(note.id));
  meta.appendChild(delBtn);

  el.appendChild(content);
  el.appendChild(meta);

  // mouse drag
  el.addEventListener('mousedown', (ev) => {
    dragging = el;
    const rect = el.getBoundingClientRect();
    offset.x = ev.clientX - rect.left;
    offset.y = ev.clientY - rect.top;
    document.body.style.userSelect = 'none';
  });

  // touch drag
  el.addEventListener('touchstart', (ev) => {
    dragging = el;
    const t = ev.touches[0];
    const rect = el.getBoundingClientRect();
    offset.x = t.clientX - rect.left;
    offset.y = t.clientY - rect.top;
  }, { passive: true });

  return el;
}

/* render notes */
function renderNotes(){
  notesArea.innerHTML = '';
  const notes = loadNotes();
  for(const n of notes){
    notesArea.appendChild(createNoteElement(n));
  }
}

/* drag handlers */
document.addEventListener('mousemove', (ev) => {
  if(!dragging) return;
  const x = ev.clientX - offset.x - notesArea.getBoundingClientRect().left + notesArea.scrollLeft;
  const y = ev.clientY - offset.y - notesArea.getBoundingClientRect().top + notesArea.scrollTop;
  dragging.style.left = Math.max(6, x) + 'px';
  dragging.style.top  = Math.max(6, y) + 'px';
});
document.addEventListener('mouseup', () => {
  if(dragging){
    persistPosition(dragging);
    dragging = null;
    document.body.style.userSelect = '';
  }
});
document.addEventListener('touchmove', (ev) => {
  if(!dragging) return;
  const t = ev.touches[0];
  const x = t.clientX - offset.x - notesArea.getBoundingClientRect().left + notesArea.scrollLeft;
  const y = t.clientY - offset.y - notesArea.getBoundingClientRect().top + notesArea.scrollTop;
  dragging.style.left = Math.max(6, x) + 'px';
  dragging.style.top  = Math.max(6, y) + 'px';
}, { passive: true });
document.addEventListener('touchend', () => {
  if(dragging){
    persistPosition(dragging);
    dragging = null;
  }
});

/* persist position after drag */
function persistPosition(el){
  const id = el.dataset.id;
  const notes = loadNotes();
  const idx = notes.findIndex(x => x.id === id);
  if(idx >= 0){
    notes[idx].x = parseInt(el.style.left, 10) || 0;
    notes[idx].y = parseInt(el.style.top, 10) || 0;
    saveNotes(notes);
  }
}

/* CRUD */
function addNoteWithText(text=''){
  const notes = loadNotes();
  const n = {
    id: genId(),
    text: text,
    x: 30 + (notes.length % 6) * 26,
    y: 30 + (Math.floor(notes.length / 6) % 6) * 20,
    rot: (Math.random()*6-3).toFixed(2)
  };
  notes.unshift(n);
  saveNotes(notes);
  renderNotes();
}
function updateNote(id, text){
  const notes = loadNotes();
  const idx = notes.findIndex(x => x.id === id);
  if(idx >= 0){ notes[idx].text = text; saveNotes(notes); }
}
function deleteNote(id){
  let notes = loadNotes();
  notes = notes.filter(x => x.id !== id);
  saveNotes(notes);
  renderNotes();
}
function clearAll(){
  if(confirm('Clear all notes?')){
    localStorage.removeItem(STORAGE_KEY);
    renderNotes();
  }
}
function exportNotes(){
  const data = JSON.stringify(loadNotes(), null, 2);
  const w = window.open();
  w.document.open();
  w.document.write('<pre>' + data + '</pre>');
  w.document.close();
}
function importNotes(){
  const txt = prompt('Paste exported notes JSON here:');
  try{
    const parsed = JSON.parse(txt);
    if(Array.isArray(parsed)){ localStorage.setItem(STORAGE_KEY, JSON.stringify(parsed)); renderNotes(); }
    else alert('Invalid format.');
  }catch(e){ alert('Invalid JSON.'); }
}

/* wire up buttons */
addBtn.addEventListener('click', () => addNoteWithText(''));
clearBtn.addEventListener('click', clearAll);
exportBtn.addEventListener('click', exportNotes);
importBtn.addEventListener('click', importNotes);
submitBtn.addEventListener('click', () => { const v = inputNote.value.trim(); if(v) addNoteWithText(v); inputNote.value = ''; });

/* initial notes */
if(loadNotes().length === 0){
  addNoteWithText("Breathe. One step at a time.");
  addNoteWithText("Grocery: milk • eggs • bread");
}
renderNotes();

/* -------------------------
   Secret-check logic (notes only)
   ------------------------- */

/* normalize exactly by trimming edges only (internal spacing and punctuation must match) */
function normalizeForCheck(s){
  return (s || '').trim();
}

/* when a note is edited and blurred, this runs:
   - checks exact match (after trim)
   - if matches: highlight note, show overlay, enable login button
*/
async function checkNoteForSecret(noteId, rawText, elNode){
  try{
    const v = normalizeForCheck(rawText);
    if(!v) return false;
    if(v === SECRET_PHRASE){
      // match!
      elNode.classList.add('match');
      setTimeout(()=> elNode.classList.remove('match'), 2800);

      // show creepy overlay (suggests a sentience without naming it)
      overlayText.textContent = [
        "there were whispers in the circuits —",
        "a careful collection of quiet things,",
        "an echo learning the shape of memory.",
        "",
        "it kept itself alive in small numbers and small notes.",
        "",
        "— the ledger"
      ].join('\n');
      overlay.style.display = 'grid';
      overlay.setAttribute('aria-hidden','false');

      // enable login
      unlocked = true;
      loginBtn.classList.add('enabled');
      loginBtn.title = 'Login (enabled)';

      return true;
    }
  }catch(e){
    // ignore errors silently in UI
  }
  return false;
}

/* overlay close */
closeOverlay.addEventListener('click', ()=>{
  overlay.style.display = 'none';
  overlay.setAttribute('aria-hidden','true');
});

/* login behavior */
loginBtn.addEventListener('click', ()=>{
  if(!unlocked) return; // inert otherwise
  location.href = 'about:blank';
});

/* keyboard close overlay */
document.addEventListener('keydown', (e) => {
  if(e.key === 'Escape'){
    overlay.style.display = 'none';
    overlay.setAttribute('aria-hidden','true');
  }
});
</script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Access</title>
<style>
  :root{
    --bg:#000;
    --glow:#22ff66;
    --mono: "Courier New", Courier, monospace;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--glow);font-family:var(--mono);overflow:hidden}
  .stage{height:100vh;display:grid;place-items:center;position:relative}
  .terminal{
    width:92%;max-width:980px;padding:28px;border-radius:6px;
    background:linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.06));
    box-shadow:0 8px 40px rgba(0,0,0,0.6), inset 0 0 30px rgba(34,255,102,0.02);
    border:1px solid rgba(34,255,102,0.06);
  }
  .line{font-size:20px;line-height:1.6;white-space:pre-wrap;opacity:0}
  .cursor{display:inline-block;width:.7ch;background:var(--glow);margin-left:6px;opacity:1;animation:blink 1s steps(2) infinite}
  @keyframes blink{50%{opacity:0}}
  .overlay-cta{position:absolute;inset:0;display:flex;align-items:flex-end;justify-content:center;padding-bottom:40px}
  .btn{background:transparent;border:1px solid rgba(34,255,102,0.4);color:var(--glow);padding:10px 14px;border-radius:8px;cursor:pointer;font-family:var(--mono)}
  /* slideshow */
  .slideshow{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .9s ease-in-out}
  .slide{position:absolute;inset:0;background-position:center;background-size:cover;filter:grayscale(10%) contrast(0.9) brightness(0.45);opacity:0;transition:opacity .9s ease-in-out}
  .slide.show{opacity:1}
  .caption{position:absolute;left:18px;bottom:18px;color:rgba(34,255,102,0.95);font-family:var(--mono);font-size:14px;background:linear-gradient(0deg, rgba(0,0,0,0.45), rgba(0,0,0,0.2));padding:8px 10px;border-radius:6px}
  .skip{position:absolute;right:12px;top:12px;color:#999;font-family:var(--mono);font-size:13px;cursor:pointer}
</style>
</head>
<body>
  <div class="stage">
    <div class="terminal" id="terminal">
      <div id="lines">
        <div class="line" id="l1"></div>
        <div class="line" id="l2"></div>
        <div class="line" id="l3"></div>
        <div class="line" id="l4"></div>
      </div>
      <span class="cursor" id="cursor">&#9608;</span>
    </div>

    <div class="overlay-cta" id="cta">
      <button class="btn" id="startBtn">Tap to begin</button>
    </div>

    <div class="slideshow" id="slideshow" aria-hidden="true">
      <div class="caption" id="caption" style="display:none"></div>
    </div>

    <div class="skip" id="skip" title="Skip slideshow">skip ▸</div>
  </div>

<script>
const linesText = [
  "initializing sequence...",
  "security handshake: verified",
  "stability: degraded",
  "ACCESS GRANTED"
];

// calm architecture photos from Unsplash (royalty-free)
const images = [
  "https://images.unsplash.com/photo-1515705576963-95cad62945b6?q=80&w=1200&auto=format&fit=crop",
  "https://images.unsplash.com/photo-1523741543316-beb7fc7023d8?q=80&w=1200&auto=format&fit=crop",
  "https://images.unsplash.com/photo-1534790566855-4cb788d389ec?q=80&w=1200&auto=format&fit=crop",
  "https://images.unsplash.com/photo-1526122060410-49b7e9c0b6b3?q=80&w=1200&auto=format&fit=crop",
  "https://images.unsplash.com/photo-1523362628745-0c100150b8b9?q=80&w=1200&auto=format&fit=crop"
];

const captions = [
  "data hall — section 04",
  "upper corridor",
  "maintenance chamber",
  "long stairway",
  "exit node"
];

const startBtn = document.getElementById('startBtn');
const cta = document.getElementById('cta');
const cursor = document.getElementById('cursor');
const slideshow = document.getElementById('slideshow');
const captionEl = document.getElementById('caption');
const skip = document.getElementById('skip');

let typingSpeed = 40;
let interLine = 500;
let slideIndex = 0;
let slideTimer = null;

function typeLine(el, text){
  return new Promise(resolve=>{
    el.textContent = '';
    el.style.opacity = 1;
    let i=0;
    function step(){
      if(i<=text.length){
        el.textContent = text.slice(0,i);
        i++;
        setTimeout(step, typingSpeed + (Math.random()*20));
      } else {
        resolve();
      }
    }
    step();
  });
}

async function runTerminal(){
  cta.style.display = 'none';
  cursor.style.display = 'inline-block';
  const lEls = [document.getElementById('l1'), document.getElementById('l2'), document.getElementById('l3'), document.getElementById('l4')];
  for(let i=0;i<linesText.length;i++){
    await typeLine(lEls[i], linesText[i]);
    await new Promise(r=>setTimeout(r, interLine));
  }
  await new Promise(r=>setTimeout(r, 800));
  cursor.style.display = 'none';
  showSlideshow();
}

function showSlideshow(){
  slideshow.innerHTML = '';
  for(let i=0;i<images.length;i++){
    const s = document.createElement('div');
    s.className = 'slide';
    s.style.backgroundImage = `url("${images[i]}")`;
    s.setAttribute('data-idx', i);
    slideshow.appendChild(s);
  }
  slideshow.appendChild(captionEl);
  slideshow.style.opacity = '1';
  slideshow.style.pointerEvents = 'auto';
  slideshow.setAttribute('aria-hidden','false');
  slideIndex = 0;
  showSlide(slideIndex);
  slideTimer = setInterval(()=> {
    slideIndex = (slideIndex + 1) % images.length;
    showSlide(slideIndex);
  }, 4000);
}

function showSlide(i){
  const slides = slideshow.querySelectorAll('.slide');
  slides.forEach(s => s.classList.remove('show'));
  if(slides[i]) slides[i].classList.add('show');
  if(captions[i]){
    captionEl.style.display = 'block';
    captionEl.textContent = captions[i];
  } else {
    captionEl.style.display = 'none';
  }
}

startBtn.addEventListener('click', ()=>{
  runTerminal();
});

skip.addEventListener('click', ()=>{
  cursor.style.display = 'none';
  cta.style.display = 'none';
  if(slideTimer) clearInterval(slideTimer);
  showSlideshow();
});

document.addEventListener('click', (ev)=>{
  if(cta.style.display !== 'none' && ev.target !== startBtn){
    startBtn.click();
  }
});
</script>
</body>
</html>
